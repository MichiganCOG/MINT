import numpy as np
import matplotlib.pyplot as plt


def data_stl10_full():

    ## STL-10
    oneshot_x   = np.array([100.0, 90.000016, 79.999992, 70.000008, 59.999984, 50.000000, 40.000016, 29.999992, 20.000008, 9.999984])
    oneshot_y   = np.array([42.100000, 42.087500, 42.112500, 42.150000, 41.250000, 39.875000, 38.362500, 34.437500, 27.800000, 14.837500])

    a_group_3_x   = np.array([100.0, 99.62582643552501, 95.13574366182519, 85.03305742100056, 56.904641053672755, 45.967385079910464, 36.25514081940757, 27.801095840491435, 16.54335207454839, 4.942344734239159])
    a_group_3_y   = np.array([42.1, 41.962500000000006, 41.9125, 41.825, 42.3625, 38.3875, 40.0625, 36.0625, 21.2375, 14.1875])

    legends = ['weight-based','a-group-3']
    
    return oneshot_x, oneshot_y, a_group_3_x, a_group_3_y, legends


def data_stl10_conv():

    ## STL-10, Conv2
    oneshot_x   = np.array([100.0,90.0,      80.0,      70.0,      60.0,      50.0,      40.0,      30.0,      20.0,      10.0])
    oneshot_y   = np.array([42.1, 42.225000, 42.087500, 41.937500, 41.200000, 41.287500, 40.837500, 40.612500, 41.837500, 38.950000 ])

    #a_x         = np.array([])
    #a_y         = np.array([])

    #b_x         = np.array([99.305556, 90.277778, 79.166667, 70.138889, 59.722222, 49.305556, 40.277778, 29.861111, 20.138889, 9.722222])
    #b_y         = np.array([42.062500, 42.225000, 41.612500, 30.425000, 29.225000, 27.187500, 29.262500, 23.912500, 25.037500, 10.0])

    a_group_2_x = np.array([99.82096354166666, 84.29361979166666, 84.29361979166666, 84.29361979166666, 60.489908854166664, 50.935872395833336, 41.7236328125, 34.22037760416667, 22.867838541666664, 12.972005208333334])
    a_group_2_y = np.array([41.9, 40.5, 40.5, 40.5, 41.8125, 40.887499999999996, 41.725, 35.1375, 31.65, 17.875])

    a_group_5_x = np.array([100.0, 93.115234, 74.584961, 69.734701, 60.782878, 53.206380, 43.139648, 36.385091, 26.009115, 9.513346])
    a_group_5_y = np.array([42.1,  42.137500, 42.212500, 42.137500, 42.025000, 43.075000, 42.400000, 27.387500, 25.300000, 21.325000])


    legends = ['weight-based','a-group-2','a-group-5']


    return oneshot_x, oneshot_y, a_group_2_x, a_group_2_y, a_group_5_x, a_group_5_y, legends



def data_stl10_fc():

    # STL-10
    oneshot_x   = np.array([100.0,     90.277778, 79.861111, 70.138889, 59.722222, 50.0,      40.277778, 29.861111, 20.138889, 9.722222])
    oneshot_y   = np.array([42.100000, 39.925000, 38.687500, 37.162500, 32.200000, 30.987500, 38.100000, 36.137500, 31.575000, 20.512500])

    a_x         = np.array([])
    a_y         = np.array([])

    b_x         = np.array([99.305556, 90.277778, 79.166667, 70.138889, 59.722222, 49.305556, 40.277778, 29.861111, 20.138889, 9.722222])
    b_y         = np.array([42.062500, 42.225000, 41.612500, 30.425000, 29.225000, 27.187500, 29.262500, 23.912500, 25.037500, 10.0])

    a_group_2_x = np.array([100.0,     88.888889, 78.472222, 65.972222, 64.583333, 45.138889, 37.500000, 25.000000, 22.222222, 17.361111])
    a_group_2_y = np.array([42.100000, 42.100000, 36.775000, 38.550000, 41.837500, 19.162500, 29.925000, 18.612500, 13.212500, 10.0 ])

    a_group_3_x = np.array([100.0,     89.583333, 80.555556, 69.444444, 57.638889, 47.222222, 39.583333, 38.888889, 20.833333, 6.944444])
    a_group_3_y = np.array([42.100000, 42.100000, 36.862500, 38.350000, 43.800000, 43.562500, 38.075000, 27.950000, 17.125000, 10.000000])

    legends = ['weight-based','a','b','a-group-2','a-group-3']

    return oneshot_x, oneshot_y, a_x, a_y, b_x, b_y, a_group_2_x, a_group_2_y, a_group_3_x, a_group_3_y, legends

if __name__== '__main__':

    ## CIFAR-10
    #oneshot_x   = np.array([100.0,     90.277778, 79.861111, 70.138889, 59.722222, 50.0,      40.277778, 29.861111, 20.138889, 9.722222])
    #oneshot_y   = np.array([77.190000, 77.610000, 74.830000, 68.800000, 57.860000, 56.750000, 56.630000, 55.960000, 22.180000, 9.870000])

    #a_x         = np.array([])
    #a_y         = np.array([])

    #b_x         = np.array([])
    #b_y         = np.array([])

    #a_group_2_x = np.array([])
    #a_group_2_y = np.array([])

    #a_group_3_x = np.array([])
    #a_group_3_y = np.array([])

    dataset = 'STL10'
    layers  = 'full'


    if 'STL10' in dataset:
        if 'conv' in layers:
            data = data_stl10_conv()
        elif 'full' in layers:
            data = data_stl10_full()

    for plot_idx  in np.arange(0,len(data)-1,2):
        plt.plot(data[plot_idx], data[plot_idx+1])

    plt.legend(data[-1])

    plt.xlim([101.0, 8.5])
    plt.xlabel('% of weights remaining from original model')    
    plt.ylabel('Recognition performance (%)')
    plt.title('Comparison of performance variation when AlexNet is one-shot pruned, w/o retraining')

    plt.show()
